---
- hosts: localhost
  tasks:
    - name: Add git-duet tap for Homebrew
      homebrew_tap:
        name: git-duet/tap
        state: present
    - name: Install common packages
      homebrew:
        name:
          - asdf
          - git
          - git-duet
          - gnupg
          - pinentry-mac
          - wget
          - zsh-git-prompt
        state: latest
    - name: Check status of full-disk encryption
      command: fdesetup status | grep "FileVault is On."
      register: diskEncryptionEnabled
    - name: Enable full-disk encryption
      command: fdesetup enable
      when: diskEncryptionEnabled is false
      become: true
